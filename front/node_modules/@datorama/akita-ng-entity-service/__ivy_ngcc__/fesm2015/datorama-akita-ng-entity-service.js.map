{"version":3,"file":"datorama-akita-ng-entity-service.js","sources":["@datorama/akita-ng-entity-service/lib/action-factory.ts","@datorama/akita-ng-entity-service/lib/helpers.ts","@datorama/akita-ng-entity-service/lib/ng-entity-service-notifier.ts","@datorama/akita-ng-entity-service/lib/ng-entity-service.config.ts","@datorama/akita-ng-entity-service/lib/ng-entity-service.loader.ts","@datorama/akita-ng-entity-service/lib/ng-entity.service.ts","@datorama/akita-ng-entity-service/datorama-akita-ng-entity-service.ts"],"names":[],"mappings":"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","sourcesContent":["import { EntityServiceAction, NgEntityServiceNotifier } from './ng-entity-service-notifier';\n\nexport function successAction(\n  storeName: string,\n  notifier: NgEntityServiceNotifier\n): (params: Partial<EntityServiceAction>) => void {\n  return function({ payload, method, successMsg }) {\n    notifier.dispatch({\n      type: 'success',\n      storeName,\n      payload,\n      method,\n      successMsg\n    });\n  };\n}\n\nexport function errorAction(\n  storeName: string,\n  notifier: NgEntityServiceNotifier\n): (params: Partial<EntityServiceAction>) => void {\n  return function({ payload, method, errorMsg }) {\n    notifier.dispatch({\n      type: 'error',\n      storeName,\n      payload,\n      method,\n      errorMsg\n    });\n  };\n}\n","import { isNumber, isString } from '@datorama/akita';\n\nexport function isID(idOrConfig: any) {\n  return isNumber(idOrConfig) || isString(idOrConfig);\n}\n","import { Subject } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { filter } from 'rxjs/operators';\nimport { Msg } from './types';\n\nexport enum HttpMethod {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n  PATCH = 'PATCH',\n  DELETE = 'DELETE'\n}\n\nexport type ActionType = 'success' | 'error';\n\nexport type EntityServiceAction = {\n  storeName: string;\n  type: ActionType;\n  payload: any;\n  method: HttpMethod;\n} & Msg;\n\nexport const ofType = (type: ActionType) => filter((action: EntityServiceAction) => action.type === type);\n\nexport const filterMethod = (method: HttpMethod | keyof (typeof HttpMethod)) =>\n  filter((action: EntityServiceAction) => action.method === method);\n\nexport const filterStore = (name: string) => filter((action: EntityServiceAction) => action.storeName === name);\n\n@Injectable({ providedIn: 'root' })\nexport class NgEntityServiceNotifier {\n  private dispatcher = new Subject<EntityServiceAction>();\n  action$ = this.dispatcher.asObservable();\n\n  dispatch(event: EntityServiceAction) {\n    this.dispatcher.next(event);\n  }\n}\n","import { InjectionToken } from '@angular/core';\nimport { NgEntityServiceParams } from './types';\nimport { HttpMethod } from './ng-entity-service-notifier';\nimport { isObject } from '@datorama/akita';\n\nexport interface NgEntityServiceGlobalConfig {\n  baseUrl?: string;\n  httpMethods?: Partial<{\n    GET: HttpMethod;\n    POST: HttpMethod;\n    PATCH: HttpMethod;\n    PUT: HttpMethod;\n    DELETE: HttpMethod;\n  }>;\n}\n\nexport const NG_ENTITY_SERVICE_CONFIG = new InjectionToken<NgEntityServiceGlobalConfig>('NgEntityServiceGlobalConfig');\n\nexport const defaultConfig: NgEntityServiceGlobalConfig = {\n  httpMethods: {\n    GET: HttpMethod.GET,\n    POST: HttpMethod.POST,\n    PATCH: HttpMethod.PATCH,\n    PUT: HttpMethod.PUT,\n    DELETE: HttpMethod.DELETE\n  }\n};\n\nexport function mergeDeep(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        mergeDeep(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return mergeDeep(target, ...sources);\n}\n\nexport function NgEntityServiceConfig(config: NgEntityServiceParams = {}) {\n  return function(constructor) {\n    if (config.baseUrl) {\n      constructor['baseUrl'] = config.baseUrl;\n    }\n\n    if (config.resourceName) {\n      constructor['resourceName'] = config.resourceName;\n    }\n  };\n}\n","import { Subject } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { filter, map } from 'rxjs/operators';\nimport { isFunction } from '@datorama/akita';\nimport { HttpMethod } from './ng-entity-service-notifier';\n\ntype Event = { method: HttpMethod; loading: boolean; storeName: string; entityId?: any };\n\n@Injectable({ providedIn: 'root' })\nexport class NgEntityServiceLoader {\n  private dispatcher = new Subject<Event>();\n  loading$ = this.dispatcher.asObservable();\n\n  dispatch(event: Event) {\n    this.dispatcher.next(event);\n  }\n\n  loadersFor(name?: string) {\n    const filterStore = filter(({ storeName }: Event) => (name ? storeName === name : true));\n    const filterMethod = mthd =>\n      filter(({ method }: Event) => {\n        return isFunction(mthd) ? mthd(method) : method === mthd;\n      });\n\n    const actionBased = (current: ((method) => boolean) | HttpMethod) =>\n      this.loading$.pipe(\n        filterStore,\n        filterMethod(current),\n        map(action => action.loading)\n      );\n\n    const idBased = (id: any, mthd: ((method) => boolean) | HttpMethod) =>\n      this.loading$.pipe(\n        filterStore,\n        filterMethod(mthd),\n        filter(action => action.entityId === id),\n        map(action => action.loading)\n      );\n\n    return {\n      get$: actionBased(HttpMethod.GET),\n      add$: actionBased(HttpMethod.POST),\n      update$: actionBased(method => method === HttpMethod.PUT || method === HttpMethod.PATCH),\n      delete$: actionBased(HttpMethod.DELETE),\n      getEntity: (id: any) => idBased(id, HttpMethod.GET),\n      updateEntity: (id: any) => idBased(id, method => method === HttpMethod.PUT || method === HttpMethod.PATCH),\n      deleteEntity: (id: any) => idBased(id, HttpMethod.DELETE)\n    };\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { EntityService, EntityState, EntityStore, getEntityType, getIDType, isDefined } from '@datorama/akita';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, finalize, map, tap } from 'rxjs/operators';\nimport { errorAction, successAction } from './action-factory';\nimport { isID } from './helpers';\nimport { EntityServiceAction, HttpMethod, NgEntityServiceNotifier } from './ng-entity-service-notifier';\nimport { defaultConfig, mergeDeep, NgEntityServiceGlobalConfig, NG_ENTITY_SERVICE_CONFIG } from './ng-entity-service.config';\nimport { NgEntityServiceLoader } from './ng-entity-service.loader';\nimport { HttpAddConfig, HttpConfig, HttpDeleteConfig, HttpGetConfig, HttpUpdateConfig, NgEntityServiceParams } from './types';\n\nexport const mapResponse = <T>(config?: HttpConfig<T>) => map((res) => (config && !!config.mapResponseFn ? config.mapResponseFn(res) : res));\n\nexport class NgEntityService<S extends EntityState = any> extends EntityService<S> {\n  baseUrl: string | undefined;\n  loader: NgEntityServiceLoader;\n\n  private readonly http: HttpClient;\n  private readonly notifier: NgEntityServiceNotifier;\n  private readonly mergedConfig: NgEntityServiceParams & NgEntityServiceGlobalConfig;\n  private readonly httpMethodMap:\n    | Partial<{\n        GET: HttpMethod;\n        POST: HttpMethod;\n        PATCH: HttpMethod;\n        PUT: HttpMethod;\n        DELETE: HttpMethod;\n      }>\n    | undefined;\n\n  private readonly dispatchSuccess: (action: Partial<EntityServiceAction>) => void;\n  private readonly dispatchError: (action: Partial<EntityServiceAction>) => void;\n\n  constructor(protected readonly store: EntityStore<S>, readonly config: NgEntityServiceParams = {}) {\n    super();\n    this.http = inject(HttpClient);\n    this.loader = inject(NgEntityServiceLoader);\n    this.notifier = inject(NgEntityServiceNotifier);\n    const globalConfig = inject(NG_ENTITY_SERVICE_CONFIG);\n    this.mergedConfig = mergeDeep({}, defaultConfig, globalConfig, this.getDecoratorConfig(), config);\n    this.baseUrl = this.mergedConfig.baseUrl;\n    this.httpMethodMap = this.mergedConfig.httpMethods;\n\n    this.dispatchSuccess = successAction(this.store.storeName, this.notifier);\n    this.dispatchError = errorAction(this.store.storeName, this.notifier);\n  }\n\n  get api() {\n    if (!this.baseUrl) {\n      throw new Error(`baseUrl of ${this.constructor.name} is not defined.`);\n    }\n\n    return `${this.baseUrl}/${this.resourceName}`;\n  }\n\n  get resourceName() {\n    return this.mergedConfig.resourceName || this.store.storeName;\n  }\n\n  setBaseUrl(baseUrl: string) {\n    this.baseUrl = baseUrl;\n  }\n\n  getHttp() {\n    return this.http;\n  }\n\n  getConfig() {\n    return this.mergedConfig;\n  }\n\n  /**\n   * Get one entity - Creates a GET request\n   *\n   * @example\n   * service.get(id).subscribe()\n   * service.get(id, { headers, params, url }).subscribe()\n   */\n  get<T>(id?: getIDType<S>, config?: HttpGetConfig<T>): Observable<T>;\n  /**\n   * Get all entities - Creates a GET request\n   *\n   * @example\n   * service.get().subscribe()\n   * service.get({ headers, params, url }).subscribe()\n   */\n  get<T>(config?: HttpGetConfig<T>): Observable<T>;\n  get<T>(idOrConfig?: getIDType<S> | HttpGetConfig<T>, config?: HttpGetConfig<T>): Observable<T> {\n    const method = this.getHttpMethod(HttpMethod.GET);\n    const isSingle = isID(idOrConfig);\n    const entityId = isSingle ? (idOrConfig as getIDType<S>) : undefined;\n    const conf = (!isSingle ? (idOrConfig as HttpGetConfig<T>) : config) || {};\n    const url = this.resolveUrl(conf, entityId);\n\n    this.loader.dispatch({\n      method,\n      loading: true,\n      entityId,\n      storeName: this.store.storeName,\n    });\n\n    return this.http.request(method, url, conf).pipe(\n      mapResponse(conf),\n      tap((data: any) => {\n        if (!conf.skipWrite) {\n          if (isSingle) {\n            this.store.upsert(entityId, data, (id, newState) => ({ id, ...newState }));\n          } else {\n            if (conf.append) {\n              this.store.add(data);\n            } else if (conf.upsert) {\n              this.store.upsertMany(data);\n            } else {\n              this.store.set(data);\n            }\n          }\n        }\n\n        this.dispatchSuccess({\n          method,\n          payload: data,\n          successMsg: conf.successMsg,\n        });\n      }),\n      catchError((error) => this.handleError(method, error, conf.errorMsg)),\n      finalize(() => {\n        this.loader.dispatch({\n          method,\n          loading: false,\n          entityId,\n          storeName: this.store.storeName,\n        });\n      })\n    );\n  }\n\n  /**\n   * Add a new entity - Creates a POST request\n   *\n   * @example\n   * service.add(entity).subscribe()\n   * service.add(entity, config).subscribe()\n   */\n  add<T>(entity: getEntityType<S>, config?: HttpAddConfig<T>): Observable<T> {\n    const url = this.resolveUrl(config);\n    const method = this.getHttpMethod(HttpMethod.POST);\n\n    this.loader.dispatch({\n      method,\n      loading: true,\n      storeName: this.store.storeName,\n    });\n\n    const configWithBody = { ...config, ...{ body: entity } };\n\n    return this.http.request(method, url, configWithBody).pipe(\n      mapResponse(config),\n      tap((responseEntity: any) => {\n        if (!config || (config && !config.skipWrite)) {\n          this.store.add(responseEntity, config);\n        }\n        this.dispatchSuccess({\n          method,\n          payload: responseEntity,\n          successMsg: config && config.successMsg,\n        });\n      }),\n      catchError((error) => this.handleError(method, error, config && config.errorMsg)),\n      finalize(() => {\n        this.loader.dispatch({\n          method,\n          loading: false,\n          storeName: this.store.storeName,\n        });\n      })\n    );\n  }\n\n  /**\n   * Update an entity - Creates a PUT/PATCH request\n   *\n   * @example\n   * service.update(id, entity).subscribe()\n   * service.update(id, entity, config).subscribe()\n   */\n  update<T>(id: getIDType<S>, entity: Partial<getEntityType<S>>, config?: HttpUpdateConfig<T>): Observable<T> {\n    const url = this.resolveUrl(config, id);\n    const method = (config && config.method) || this.getHttpMethod(HttpMethod.PUT);\n\n    this.loader.dispatch({\n      method,\n      loading: true,\n      entityId: id,\n      storeName: this.store.storeName,\n    });\n\n    const configWithBody = { ...config, ...{ body: entity } };\n\n    return this.http.request(method, url, configWithBody).pipe(\n      mapResponse(config),\n      tap((responseEntity) => {\n        if (!config || (config && !config.skipWrite)) {\n          this.store.update(id, responseEntity as any);\n        }\n        this.dispatchSuccess({\n          method,\n          payload: responseEntity,\n          successMsg: config && config.successMsg,\n        });\n      }),\n      catchError((error) => this.handleError(method, error, config && config.errorMsg)),\n      finalize(() => {\n        this.loader.dispatch({\n          method,\n          loading: false,\n          entityId: id,\n          storeName: this.store.storeName,\n        });\n      })\n    ) as Observable<T>;\n  }\n\n  /**\n   * Delete an entity - Creates a DELETE request\n   *\n   * @example\n   * service.delete(id).subscribe()\n   * service.delete(id, config).subscribe()\n   */\n  delete<T>(id: getIDType<S>, config?: HttpDeleteConfig<T>): Observable<T> {\n    const url = this.resolveUrl(config, id);\n    const method = this.getHttpMethod(HttpMethod.DELETE);\n\n    this.loader.dispatch({\n      method,\n      loading: true,\n      entityId: id,\n      storeName: this.store.storeName,\n    });\n\n    return this.http.request(method, url, config).pipe(\n      mapResponse(config),\n      tap((res) => {\n        if (!config || (config && !config.skipWrite)) {\n          this.store.remove(id);\n        }\n        this.dispatchSuccess({\n          method,\n          payload: res,\n          successMsg: config && config.successMsg,\n        });\n      }),\n      catchError((error) => this.handleError(method, error, config && config.errorMsg)),\n      finalize(() => {\n        this.loader.dispatch({\n          method,\n          loading: false,\n          entityId: id,\n          storeName: this.store.storeName,\n        });\n      })\n    ) as Observable<T>;\n  }\n\n  /**\n   * Gets the mapped HttpMethod.\n   *\n   * The default HttpMethod can be changed like so:\n   * ```ts\n   * {\n   *   provide: NG_ENTITY_SERVICE_CONFIG,\n   *   useValue: {\n   *     httpMethods: {\n   *       PUT: HttpMethod.PATCH,\n   *     },\n   *   } as NgEntityServiceGlobalConfig,\n   * }\n   * ```\n   *\n   * @param type HttpMethod to get the user configured HttpMethod for\n   * @returns User configured HttpMethod for the method, else the default HttpMethod\n   */\n  protected getHttpMethod(type: HttpMethod) {\n    let httpMethod: HttpMethod;\n    if (this.httpMethodMap) {\n      httpMethod = this.httpMethodMap[type];\n    }\n    if (!httpMethod) {\n      throw new Error('Unknown HttpMethod');\n    }\n\n    return httpMethod;\n  }\n\n  /**\n   * Gets the value given via the NgEntityServiceConfig decorator\n   *\n   * ```ts\n   * @NgEntityServiceConfig({\n   *   baseUrl: 'foo',\n   *   resourceName: 'bar',\n   * })\n   * ```\n   *\n   * @param key The property key\n   * @returns The value of the given decorator key\n   */\n  private getDecoratorValue(key: keyof NgEntityServiceParams): string | undefined {\n    return (this.constructor as any)[key];\n  }\n\n  protected getDecoratorConfig() {\n    const config: NgEntityServiceParams = {};\n\n    const baseUrl = this.getDecoratorValue('baseUrl');\n    if (baseUrl) {\n      config.baseUrl = baseUrl;\n    }\n\n    const resourceName = this.getDecoratorValue('resourceName');\n    if (resourceName) {\n      config.resourceName = resourceName;\n    }\n\n    return config;\n  }\n\n  protected resolveUrl(config?: HttpConfig, id?: any) {\n    const { url, urlPostfix } = Object(config) as HttpConfig;\n    let final = this.api;\n\n    if (url) {\n      return url;\n    }\n\n    if (isDefined(id)) {\n      final += `/${id}`;\n    }\n\n    if (urlPostfix) {\n      final += `/${urlPostfix}`;\n    }\n\n    return final;\n  }\n\n  protected handleError(method: HttpMethod, error: any, errorMsg?: string) {\n    this.dispatchError({\n      method,\n      errorMsg,\n      payload: error,\n    });\n\n    return throwError(error);\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}