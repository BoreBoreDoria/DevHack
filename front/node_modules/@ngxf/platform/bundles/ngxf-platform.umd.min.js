!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common"),require("@angular/common/http"),require("rxjs/operators"),require("@angular/router")):"function"==typeof define&&define.amd?define("@ngxf/platform",["exports","@angular/core","rxjs","@angular/common","@angular/common/http","rxjs/operators","@angular/router"],t):t(((e=e||self).ngxf=e.ngxf||{},e.ngxf.platform={}),e.ng.core,e.rxjs,e.ng.common,e.ng.common.http,e.rxjs.operators,e.ng.router)}(this,(function(e,t,n,i,o,r,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}var h=function(){function e(){}return e.prototype.createSubscription=function(e,t,n,i){return e.subscribe(t,n,i)},e.prototype.dispose=function(e){e&&e.unsubscribe()},e}(),l=function(){function e(){}return e.prototype.createSubscription=function(e,t,n,i){var o=e.then(t,n);return"finally"in o?o.finally(i):o},e.prototype.dispose=function(e){},e}(),d=new h,y=new l;var v=function(){function e(e,n,i){this.templateRef=e,this.viewContainer=n,this.cd=i,this.next=new t.EventEmitter,this.error=new t.EventEmitter,this.complete=new t.EventEmitter,this.context={$implicit:null},this.viewRef=this.viewContainer.createEmbeddedView(this.templateRef,this.context),this.componentInstance=i.context}return e.prototype.ngOnChanges=function(e){"async"in e&&this.onAsyncDidChanged(this.async,e.async.previousValue),"asyncFrom"in e&&this.onAsyncDidChanged(this.asyncFrom,e.asyncFrom.previousValue)},e.prototype.ngOnDestroy=function(){this.dispose(),this.viewContainer.clear(),this.viewRef&&(this.viewRef.destroy(),this.viewRef=null)},e.prototype.onAsyncDidChanged=function(e,t){return this.subscription?e!==t?(this.dispose(),this.onAsyncDidChanged(e,null)):void 0:e&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this;this.strategy=function(e){if(n.isObservable(e))return d;if((t=e)&&"function"!=typeof t.subscribe&&"function"==typeof t.then)return y;var t;throw new Error("InvalidDirectiveArgument: 'async' for directive 'async'")}(e),this.subscription=this.strategy.createSubscription(e,(function(e){return t.onNext(e)}),(function(e){return t.onError(e)}),(function(){return t.onComplete()}))},e.prototype.onNext=function(e){this.context.$implicit=e,this.next.emit(e),m(this.asyncNext)&&this.asyncNext.call(this.componentInstance,e),this.viewRef.markForCheck()},e.prototype.onError=function(e){this.error.emit(e),m(this.asyncError)&&this.asyncError.call(this.componentInstance,e)},e.prototype.onComplete=function(){this.complete.next(),m(this.asyncComplete)&&this.asyncComplete.call(this.componentInstance)},e.prototype.dispose=function(){this.strategy&&(this.strategy.dispose(this.subscription),this.subscription=null,this.strategy=null)},e.decorators=[{type:t.Directive,args:[{selector:"[async]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef},{type:t.ChangeDetectorRef}]},e.propDecorators={async:[{type:t.Input}],asyncFrom:[{type:t.Input}],asyncNext:[{type:t.Input}],asyncError:[{type:t.Input}],asyncComplete:[{type:t.Input}],next:[{type:t.Output}],error:[{type:t.Output}],complete:[{type:t.Output}]},e}();function m(e){return"function"==typeof e}function g(e,t){for(var n=a({},e),i=0;i<t.length;i++){delete n[t[i]]}return n}var R=Symbol("[PARENT_CONTEXT_TOKEN]");var w=function(){function e(e,t){this.viewContainerRef=e,this.templateRefs=t}return e.prototype.createEmbeddedView=function(t){var n=u(this.getParentTemplateRefs()),i=n[0],o=n.slice(1);return this.context=t,o.length>0&&(this.elementRef=i.elementRef,this.context[R]=o,this.context.children=new e(this.viewContainerRef,o)),this.viewRef=this.viewContainerRef.createEmbeddedView(i,this.context),this.viewRef},e.prototype.markForCheck=function(){this.viewRef&&this.viewRef.markForCheck()},e.prototype.detectChanges=function(){this.viewRef&&this.viewRef.detectChanges()},e.prototype.updateContext=function(e){var t=this.getHydratedParentContext();e(this.context,t),this.markForCheck()},e.prototype.destroy=function(){this.viewRef&&!this.viewRef.destroyed&&this.viewRef.destroy(),this.viewRef=null},e.prototype.getParentTemplateRefs=function(){return this.templateRefs?this.templateRefs:C(this.viewContainerRef.injector.view)[R]},e.prototype.getHydratedParentContext=function(){return g(C(this.viewContainerRef.injector.view),[R,"children"])},e}();function C(e){var t=e.context;return function(e){return e&&R in e}(t)?t:C(e.parent)}var b=function(){function e(e,t){this.templateRef=e,this.viewContainerRef=t,this.context={$implicit:null,compose:null}}return e.prototype.ngOnChanges=function(e){"compose"in e&&this.onTemplateRefsDidChanged(this.compose,e.compose.previousValue),"composeOf"in e&&this.onTemplateRefsDidChanged(this.composeOf,e.composeOf.previousValue)},e.prototype.ngOnDestroy=function(){this.destroy()},e.prototype.onTemplateRefsDidChanged=function(e,t){return this.viewRef?this.viewRef.destroyed||e!==t?(this.destroy(),this.onTemplateRefsDidChanged(e,null)):void 0:this.create(e)},e.prototype.create=function(e){this.context.compose=this.context.$implicit=this.createComposeFn(e),this.viewRef=this.viewContainerRef.createEmbeddedView(this.templateRef,this.context)},e.prototype.destroy=function(){this.viewRef&&!this.viewRef.destroyed&&this.viewRef.destroy(),this.viewRef=null},e.prototype.createComposeFn=function(e){var t=this;return(function(n){return new w(t.viewContainerRef,f(e,[n]))})},e.decorators=[{type:t.Directive,args:[{selector:"[compose]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={compose:[{type:t.Input}],composeOf:[{type:t.Input}]},e}();var D=function(){function e(e){var t=void 0===e?{}:e,n=t.path,i=t.domain,o=t.expires,r=t.secure;this.path=this.isPresent(n)?n:null,this.domain=this.isPresent(i)?i:null,this.expires=this.isPresent(o)?o:null,this.secure=!!this.isPresent(r)&&r}return e.prototype.merge=function(t){return new e({path:this.isPresent(t)&&this.isPresent(t.path)?t.path:this.path,domain:this.isPresent(t)&&this.isPresent(t.domain)?t.domain:this.domain,expires:this.isPresent(t)&&this.isPresent(t.expires)?t.expires:this.expires,secure:this.isPresent(t)&&this.isPresent(t.secure)?t.secure:this.secure})},e.prototype.isPresent=function(e){return null!=e},e}();!function(e){function n(t){var n=e.call(this,{path:t||"/"})||this;return n.baseHref=t,n}(function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(n,e),n.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],n.ctorParameters=function(){return[{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[i.APP_BASE_HREF]}]}]},n.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new n(t["ɵɵinject"](i.APP_BASE_HREF,8))},token:n,providedIn:"root"})}(D);var x=function(){function e(e){this.defaultOptions=e}return Object.defineProperty(e.prototype,"cookieString",{get:function(){return document.cookie||""},set:function(e){document.cookie=e},enumerable:!0,configurable:!0}),e.prototype.cookieReader=function(e){var t=this.cookieString;if(t)return t.split("; ").reduce((function(e,t){var n,i=t.split("=");return a(a({},e),((n={})[i[0]]=decodeURIComponent(i[1]),n))}),{})[e]},e.prototype.cookieWriter=function(e,t,n){this.cookieString=this.buildCookieString(e,t,n)},e.prototype.buildCookieString=function(e,t,n){var i=this.defaultOptions||new D({path:"/"}),o=this.mergeOptions(i,n),r=o.expires;t||(r="Thu, 01 Jan 1970 00:00:00 GMT",t=""),"string"==typeof r&&(r=new Date(r));var s=encodeURIComponent(e)+"="+encodeURIComponent(t);s+=o.path?";path="+o.path:"",s+=o.domain?";domain="+o.domain:"",s+=r?";expires="+r.toUTCString():"";var c=(s+=o.secure?";secure":"").length+1;return c>4096&&console.log("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+c+" > 4096 bytes)!"),s},e.prototype.mergeOptions=function(e,t){var n=e;return t?n.merge(new D(t)):n},e.prototype.get=function(e){return this.cookieReader(e)},e.prototype.set=function(e,t,n){this.cookieWriter(e,t,n)},e.prototype.remove=function(e,t){this.cookieWriter(e,void 0,t)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:D,decorators:[{type:t.Optional}]}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](D,8))},token:e,providedIn:"root"}),e}();var P="get",I="set",O="remove";var k=[{type:P,changes:["cookiesGet"],require:["cookiesGet"]},{type:I,changes:["cookiesSet","cookiesValue","cookiesPath","cookiesDomain","cookiesExpires","cookiesSecure"],require:["cookiesSet"]},{type:O,changes:["cookiesRemove","cookiesPath","cookiesDomain"],require:["cookiesRemove"]}],V=function(){function e(e,t,n){this.templateRef=e,this.viewContainerRef=t,this.cookiesService=n,this.context={$implicit:null,get data(){return this.$implicit}},this.viewRef=this.viewContainerRef.createEmbeddedView(this.templateRef,this.context)}return e.prototype.ngOnChanges=function(e){var t=this.findStrategy(e);t&&this.execute(t)},e.prototype.ngOnDestroy=function(){this.viewContainerRef.clear(),this.viewRef&&(this.viewRef.destroy(),this.viewRef=null)},e.prototype.findStrategy=function(e){var t=this;return k.find((function(n){return n.changes.some((function(t){return!!e[t]}))&&n.require.every((function(e){return!!t[e]}))}))},e.prototype.execute=function(e){var t=this,n=e.changes.map((function(e){return t[e]}));this.action.apply(this,f([e.type],n))},e.prototype.action=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=t[0],o=t[1],r={path:t[2],domain:t[3],expires:t[4],secure:!!t[5]};P===e&&(this.context.$implicit=this.getCookie(i)),I===e&&(this.setCookie(i,o,r),this.context.$implicit=o),O===e&&(this.removeCookie(i,r),this.context.$implicit=null),this.viewRef.markForCheck()},e.prototype.getCookie=function(e){return this.cookiesService.get(e)},e.prototype.setCookie=function(e,t,n){this.cookiesService.set(e,t,n)},e.prototype.removeCookie=function(e,t){this.cookiesService.remove(e,t)},e.decorators=[{type:t.Directive,args:[{selector:"[cookies]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef},{type:x}]},e.propDecorators={cookiesGet:[{type:t.Input}],cookiesSet:[{type:t.Input}],cookiesRemove:[{type:t.Input}],cookiesValue:[{type:t.Input}],cookiesPath:[{type:t.Input}],cookiesDomain:[{type:t.Input}],cookiesExpires:[{type:t.Input}],cookiesSecure:[{type:t.Input}]},e}();var E=[{type:"delete",changes:["httpDelete","httpWith"],require:["httpDelete"]},{type:"get",changes:["httpGet","httpWith"],require:["httpGet"]},{type:"head",changes:["httpHead","httpWith"],require:["httpHead"]},{type:"jsonp",changes:["httpJsonp","httpCallback"],require:["httpJsonp","httpCallback"]},{type:"options",changes:["httpOptions","httpWith"],require:["httpOptions"]},{type:"patch",changes:["httpPatch","httpSend","httpWith"],require:["httpPatch"]},{type:"post",changes:["httpPost","httpSend","httpWith"],require:["httpPost"]},{type:"put",changes:["httpPut","httpSend","httpWith"],require:["httpPut"]}],T=function(){function e(e,t,n){this.http=e,this.templateRef=t,this.viewContainerRef=n,this.context={$implicit:null,get data(){return this.$implicit}},this.viewRef=this.viewContainerRef.createEmbeddedView(this.templateRef,this.context)}return e.prototype.ngOnChanges=function(e){var t=this.findStrategy(e);t&&this.execute(t)},e.prototype.ngOnDestroy=function(){this.dispose(),this.viewContainerRef.clear(),this.viewRef&&(this.viewRef.destroy(),this.viewRef=null)},e.prototype.findStrategy=function(e){var t=this;return E.find((function(n){return n.changes.some((function(t){return!!e[t]}))&&n.require.every((function(e){return!!t[e]}))}))},e.prototype.execute=function(e){var t=this,n=e.changes.map((function(e){return t[e]}));this.request.apply(this,f([e.type],n))},e.prototype.request=function(e){for(var t,i=this,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];this.dispose(),this.subscription=(t=this.http)[e].apply(t,f(o)).pipe(r.catchError((function(e){return console.error(e),n.of(null)}))).subscribe((function(e){i.context.$implicit=e,i.viewRef.markForCheck()}))},e.prototype.dispose=function(){this.subscription&&!this.subscription.closed&&(this.subscription.unsubscribe(),this.subscription=null)},e.decorators=[{type:t.Directive,args:[{selector:"[http]"}]}],e.ctorParameters=function(){return[{type:o.HttpClient},{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={httpDelete:[{type:t.Input}],httpGet:[{type:t.Input}],httpHead:[{type:t.Input}],httpJsonp:[{type:t.Input}],httpOptions:[{type:t.Input}],httpPatch:[{type:t.Input}],httpPost:[{type:t.Input}],httpPut:[{type:t.Input}],httpSend:[{type:t.Input}],httpCallback:[{type:t.Input}],httpWith:[{type:t.Input}]},e}();var j=function(){function e(e,t){this.templateRef=e,this.viewContainer=t,this.context={$implicit:null,init:null},this.viewRef=this.viewContainer.createEmbeddedView(this.templateRef,this.context)}return Object.defineProperty(e.prototype,"init",{set:function(e){this.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initOf",{set:function(e){this.setValue(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.viewContainer.clear(),this.viewRef&&(this.viewRef.destroy(),this.viewRef=null)},e.prototype.setValue=function(e){this.context.$implicit=this.context.init=e,this.viewRef&&this.viewRef.markForCheck()},e.decorators=[{type:t.Directive,args:[{selector:"[init]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={init:[{type:t.Input}],initOf:[{type:t.Input}]},e}();var F=function(){function e(){}return e.prototype.isDevMode=function(){return t.isDevMode()},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e},token:e,providedIn:"root"}),e}(),S=function(){function e(e,t,n){e.isDevMode()&&t.createEmbeddedView(n)}return e.prototype.ngOnDestroy=function(){this.viewRef&&(this.viewRef.destroy(),this.viewRef=null)},e.decorators=[{type:t.Directive,args:[{selector:"[isDevMode]"}]}],e.ctorParameters=function(){return[{type:F},{type:t.ViewContainerRef},{type:t.TemplateRef}]},e}();var A=function(){function e(e){this.flag=0,this.viewRef=e}return Object.defineProperty(e.prototype,"attached",{get:function(){return 1===this.flag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detached",{get:function(){return 0===this.flag},enumerable:!0,configurable:!0}),e.prototype.attachToViewContainerRef=function(e){if(this.viewContainerRef||this.attached)throw new TypeError('You can\'t use *keepAlive with *ngFor:\n  <ng-container *ngFor="...">\n    \x3c!-- Wrong! --\x3e\n    <ng-container *keepAlive></ng-container>\n  </ng-container>\n\nviewRef already attached to viewContainerRef');this.flag=1,(this.viewContainerRef=e).insert(this.viewRef)},e.prototype.detachFromViewContainerRef=function(){if(!this.viewContainerRef||this.detached)throw new TypeError("viewRef already detached from viewContainerRef");this.flag=0,this.viewContainerRef.detach(this.viewContainerRef.indexOf(this.viewRef)),delete this.viewContainerRef},e.prototype.destroy=function(){this.viewRef.destroy()},e}();var M=function(){function e(){this.limit=50}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e},token:e,providedIn:"root"}),e}();var $=function(){function e(e){this.config=e}return e.prototype.collect=function(e){var t,n,i=this.config.limit>0?this.config.limit:Number.MAX_SAFE_INTEGER;try{for(var o=p(Array.from(e.entries())),r=o.next();!r.done;r=o.next()){var s=u(r.value,2),c=s[0],a=s[1];if(e.size<=i)break;0===a.flag&&(a.destroy(),e.delete(c),console.log("Collect",a))}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:M}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](M))},token:e,providedIn:"root"}),e}();var _=function(){function e(e){this.gc=e,this.viewRefs=new Map}return e.prototype.add=function(e,t){var n=this.getTemplateDef(e);if(this.viewRefs.has(n))throw new TypeError("templateRef already exists in viewRefs");var i=new A(t);this.viewRefs.set(n,i)},e.prototype.has=function(e){var t=this.getTemplateDef(e);return this.viewRefs.has(t)},e.prototype.get=function(e){var t=this.getTemplateDef(e);if(!this.viewRefs.has(t))throw new TypeError("templateRef not exists in viewRefs");return this.viewRefs.get(t)},e.prototype.delete=function(e){var t=this.getTemplateDef(e);if(!this.viewRefs.has(t))throw new TypeError("templateRef not exists in viewRefs");return this.viewRefs.get(e).viewRef.destroy(),this.viewRefs.delete(t)},e.prototype.reattach=function(e){var t=this.getTemplateDef(e),n=this.get(e);this.viewRefs.set(t,n)},e.prototype.ngOnDestroy=function(){this.viewRefs.forEach((function(e){return e.viewRef.destroy()})),this.viewRefs.clear()},e.prototype.collect=function(){this.gc.collect(this.viewRefs)},e.prototype.forEach=function(e){this.viewRefs.forEach(e)},e.prototype.getTemplateDef=function(e){return e._def},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:$}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"]($))},token:e,providedIn:"root"}),e}();var N=function(){function e(e){this.viewRefs=e}return e.prototype.attach=function(e,t){if(this.viewRefs.has(t))this.viewRefs.reattach(t);else{var n=t.createEmbeddedView({});this.viewRefs.add(t,n)}this.patchClear(e),this.viewRefs.get(t).attachToViewContainerRef(e),this.viewRefs.collect()},e.prototype.detach=function(e,t){this.viewRefs.get(t).detachFromViewContainerRef(),this.viewRefs.collect()},e.prototype.patchClear=function(t){if(!t[e.patched]){var n=Object.getPrototypeOf(t).clear,i=this.viewRefs;Object.getPrototypeOf(t).clear=function(){i.forEach((function(e){e.viewRef._view.state|=128})),n.call(this),i.forEach((function(e){e.viewRef._view.state&=-129}))},Object.defineProperty(t,e.patched,{get:function(){return!0}})}},e.patched=Symbol("Already Patched ViewContainerRef Token"),e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:_}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](_))},token:e,providedIn:"root"}),e}();var q=function(){function e(e,t,n){this.manager=e,this.viewContainerRef=t,this.templateRef=n,e.attach(t,n)}return e.prototype.ngOnDestroy=function(){this.manager.detach(this.viewContainerRef,this.templateRef)},e.decorators=[{type:t.Directive,args:[{selector:"[keepAlive]"}]}],e.ctorParameters=function(){return[{type:N},{type:t.ViewContainerRef},{type:t.TemplateRef}]},e}();var z=new t.InjectionToken("Lazy Component Token"),L=function(){function e(e,n,i,o){this.templateRef=e,this.viewContainer=n,this.loader=i,this.injector=o,this.activate=new t.EventEmitter,this.deactivate=new t.EventEmitter,this.context={$implicit:null},this.embeddedViewRef=this.templateRef.createEmbeddedView(this.context)}return Object.defineProperty(e.prototype,"component",{get:function(){if(this.componentRef)return this.componentRef.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectableNodes",{get:function(){return[this.templateRef.createEmbeddedView(this.context).rootNodes]},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){"lazy"in e&&this.onLazyDidChanged(this.lazy,e.lazy.previousValue),"lazyLoadChildren"in e&&this.onLazyDidChanged(this.lazyLoadChildren,e.lazyLoadChildren.previousValue)},e.prototype.ngOnDestroy=function(){this.dispose(),this.embeddedViewRef&&(this.embeddedViewRef.destroy(),this.embeddedViewRef=null)},e.prototype.onLazyDidChanged=function(e,t){return this.ngModuleRef?e!==t?(this.dispose(),this.onLazyDidChanged(e,null)):void 0:e&&this.loadAndRender(e)},e.prototype.loadAndRender=function(e){var t=this;this.subscription=this.load(e).pipe(r.tap((function(e){t.ngModuleRef=e.create(t.injector);var n=t.ngModuleRef.injector.get(z),i=t.ngModuleRef.componentFactoryResolver.resolveComponentFactory(n);t.componentRef=t.viewContainer.createComponent(i,t.viewContainer.length,t.injector,t.projectableNodes,t.ngModuleRef)})),r.finalize((function(){return t.onActivate(t.component)}))).subscribe()},e.prototype.load=function(e){var t=this,i=e.split("#").join(".ts#");return n.from(this.loader.load(i)).pipe(r.catchError((function(){return n.from(t.loader.load(e))})))},e.prototype.onActivate=function(e){this.activate.emit(e),W(this.lazyActivate)&&this.lazyActivate(e),this.context.$implicit=e,this.embeddedViewRef.markForCheck()},e.prototype.onDeactivate=function(e){this.deactivate.emit(e),W(this.lazyDeactivate)&&this.lazyDeactivate(e),this.context.$implicit=null,this.embeddedViewRef.markForCheck()},e.prototype.dispose=function(){if(this.componentRef){var e=this.component;this.componentRef.destroy(),this.componentRef=null,this.onDeactivate(e)}this.ngModuleRef&&(this.ngModuleRef.destroy(),this.ngModuleRef=null),this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)},e.decorators=[{type:t.Directive,args:[{selector:"[lazy]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef},{type:t.NgModuleFactoryLoader},{type:t.Injector}]},e.propDecorators={lazy:[{type:t.Input}],lazyLoadChildren:[{type:t.Input}],lazyActivate:[{type:t.Input}],lazyDeactivate:[{type:t.Input}],activate:[{type:t.Output}],deactivate:[{type:t.Output}]},e}();function W(e){return"function"==typeof e}var K=function(){function e(e,t){this.templateRef=e,this.viewContainerRef=t,this.context={$implicit:null,nest:null}}return e.prototype.ngOnChanges=function(e){"nest"in e&&this.onTemplatesDidChanged(this.nest,e.nest.previousValue),"nestOf"in e&&this.onTemplatesDidChanged(this.nestOf,e.nestOf.previousValue)},e.prototype.ngOnDestroy=function(){this.destroy()},e.prototype.onTemplatesDidChanged=function(e,t){if(!this.context.$implicit)return e&&this.create(e);e!==t&&(this.destroy(),this.onTemplatesDidChanged(e,null))},e.prototype.create=function(e){this.context.$implicit=this.context.nest=new w(this.viewContainerRef,e),this.viewRef=this.viewContainerRef.createEmbeddedView(this.templateRef,this.context)},e.prototype.update=function(e){this.context.$implicit=this.context.nest=new w(this.viewContainerRef,e),this.viewRef.markForCheck()},e.prototype.destroy=function(){this.viewContainerRef.clear(),this.viewRef&&(this.viewRef.destroy(),this.viewRef=null)},e.decorators=[{type:t.Directive,args:[{selector:"[nest]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={nest:[{type:t.Input}],nestOf:[{type:t.Input}]},e}();var H=function(){function e(e,t){this.templateRef=e,this.viewContainerRef=t,this.context={$implicit:null}}return e.prototype.ngOnChanges=function(e){"renameProp"in e&&"renamePropTo"in e&&this.onRenameDidChanged(this.renameProp,this.renamePropTo,e.renameProp.previousValue,e.renamePropTo.previousValue)},e.prototype.ngOnDestroy=function(){this.destroy()},e.prototype.onRenameDidChanged=function(e,t,n,i){this.composedView||this.create(),e===n&&t===i||this.rename(e,t)},e.prototype.create=function(){this.composedView=new w(this.viewContainerRef),this.composedView.createEmbeddedView(this.context)},e.prototype.rename=function(e,t){this.composedView.updateContext((function(n,i){var o;return Object.assign(n,g(i,[e]),((o={})[t]=i[e],o))}))},e.prototype.destroy=function(){this.viewContainerRef.clear(),this.composedView&&(this.composedView.destroy(),this.composedView=null)},e.decorators=[{type:t.Directive,args:[{selector:"[renameProp]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={renameProp:[{type:t.Input}],renamePropTo:[{type:t.Input}]},e}();var U=function(){};var B=function(){function e(e,t){this.viewContainerRef=e,this.templateRef=t}return Object.defineProperty(e.prototype,"count",{get:function(){var e=G(this.repeat)?this.repeat:G(this.repeatOf)?this.repeatOf:0;return Math.max(e,0)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){("repeat"in e||"repeatOf"in e)&&this.onRepeatChanged(this.count)},e.prototype.ngOnDestroy=function(){this.viewContainerRef.clear()},e.prototype.onRepeatChanged=function(e){for(var t=this.viewContainerRef.length;t<e;t++)this.viewContainerRef.createEmbeddedView(this.templateRef,{$implicit:t,index:t,repeat:t},t);for(t=this.viewContainerRef.length;t>e;t--)this.viewContainerRef.remove(t-1)},e.decorators=[{type:t.Directive,args:[{selector:"[repeat]"}]}],e.ctorParameters=function(){return[{type:t.ViewContainerRef},{type:t.TemplateRef}]},e.propDecorators={repeat:[{type:t.Input}],repeatOf:[{type:t.Input}]},e}();function G(e){return"number"==typeof e}var J=function(){function e(e){this.viewContainerRef=e,this.context={$implicit:null}}return e.prototype.ngOnChanges=function(e){"return"in e&&(this.composedView?this.update():this.create())},e.prototype.ngOnDestroy=function(){this.composedView&&(this.composedView.destroy(),this.composedView=null)},e.prototype.create=function(){this.composedView=new w(this.viewContainerRef),this.composedView.createEmbeddedView(this.context),this.update()},e.prototype.update=function(){var e=this;this.composedView.updateContext((function(t){return Object.assign(t,e.return)}))},e.decorators=[{type:t.Directive,args:[{selector:"[return]"}]}],e.ctorParameters=function(){return[{type:t.ViewContainerRef}]},e.propDecorators={return:[{type:t.Input}]},e}();var Y=["url","params","queryParams","fragment","data","paramMap","queryParamMap"],X=function(){function e(e,t,n){this.templateRef=e,this.viewContainerRef=t,this.route=n,this.context={$implicit:this.route,get snapshot(){return this.route.snapshot},url:[],params:{},queryParams:{},fragment:null,data:null,get outlet(){return this.route.outlet},get component(){return this.route.component},get routeConfig(){return this.route.routeConfig},get root(){return this.route.root},get parent(){return this.route.parent},get firstChild(){return this.route.firstChild},get children(){return this.route.children},get pathFromRoot(){return this.route.pathFromRoot},paramMap:s.convertToParamMap({}),queryParamMap:s.convertToParamMap({})},this.viewRef=this.viewContainerRef.createEmbeddedView(this.templateRef,this.context),this.subscriptions=this.attachFields(Y)}return e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()})),this.subscriptions=null,this.viewContainerRef.clear(),this.viewRef&&(this.viewRef.destroy(),this.viewRef=null)},e.prototype.attachFields=function(e){var t=this;return e.map((function(e){return t.asyncAttach(e)}))},e.prototype.asyncAttach=function(e){var t=this;return this.route[e].pipe(r.distinctUntilChanged()).subscribe((function(n){t.context[e]=n,t.viewRef.markForCheck()}))},e.decorators=[{type:t.Directive,args:[{selector:"[route]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef},{type:s.ActivatedRoute}]},e}();var Z=function(){function e(e,t){this.templateRef=e,this.viewContainerRef=t,this.context={$implicit:null,setProps:null}}return e.prototype.ngOnChanges=function(e){"setProps"in e&&this.onPropsDidChanged(this.setProps,e.setProps.previousValue)},e.prototype.ngOnDestroy=function(){this.destroy()},e.prototype.onPropsDidChanged=function(e,t){return this.context.$implicit?e!==t?(this.destroy(),this.onPropsDidChanged(e,null)):void 0:e&&this.create(e)},e.prototype.create=function(e){this.composedView=new w(this.viewContainerRef),this.composedView.createEmbeddedView(this.context),this.composedView.updateContext((function(t,n){return Object.assign(t,n,e)}))},e.prototype.destroy=function(){this.viewContainerRef.clear(),this.composedView&&(this.composedView.destroy(),this.composedView=null)},e.decorators=[{type:t.Directive,args:[{selector:"[setProps]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={setProps:[{type:t.Input}]},e}();var Q=function(){function e(e,t){this.templateRef=e,this.viewContainerRef=t}return Object.defineProperty(e.prototype,"timeout",{set:function(e){this.dispose(),"number"==typeof e&&this.create(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.dispose(),this.viewContainerRef.clear()},e.prototype.create=function(e){var t=this;this.timeoutId=setTimeout((function(){t.viewContainerRef&&t.viewContainerRef.createEmbeddedView(t.templateRef)}),e)},e.prototype.dispose=function(){this.viewContainerRef.clear(),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},e.decorators=[{type:t.Directive,args:[{selector:"[timeout]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={timeout:[{type:t.Input}]},e}();var ee=function(){function e(e,t){if(this.ngFor=e,this.viewContainerRef=t,!e)throw new Error("TrackByKey should use with *ngFor!")}return e.prototype.ngOnChanges=function(e){if("ngForTrackByKey"in e){var t=this.ngForTrackByKey;this.ngFor.ngForTrackBy=t?function(e,n){return n[t]}:void 0,this.ngFor._differ=null,this.ngFor._ngForOfDirty=!0,this.viewContainerRef.clear(),this.ngFor.ngDoCheck()}},e.decorators=[{type:t.Directive,args:[{selector:"[ngForTrackByKey]"}]}],e.ctorParameters=function(){return[{type:i.NgForOf,decorators:[{type:t.Host},{type:t.Optional}]},{type:t.ViewContainerRef}]},e.propDecorators={ngForTrackByKey:[{type:t.Input}]},e}();var te=function(){function e(e,t){this.templateRef=e,this.vcr=t,this.context={}}return e.prototype.ngOnChanges=function(e){if(e.useEffect&&this.useEffect)this.destroy(),this.init();else if(e.useEffectOn)if(Array.isArray(this.useEffectOn)){var t=e.useEffectOn.previousValue||[],n=e.useEffectOn.currentValue||[];!t.every((function(e,t){return n[t]===e}))&&(this.destroy(),this.init())}else this.destroy(),this.init()},e.prototype.ngDoCheck=function(){Array.isArray(this.useEffectOn)||(this.destroy(),this.init())},e.prototype.ngOnDestroy=function(){this.destroy()},e.prototype.init=function(){this.viewRef=this.vcr.createEmbeddedView(this.templateRef,this.context),this.useEffect&&(this.onDestroyCallback=this.useEffect())},e.prototype.destroy=function(){this.onDestroyCallback&&(this.onDestroyCallback(),this.onDestroyCallback=null),this.vcr.clear(),this.viewRef&&(this.viewRef.destroy(),this.viewRef=null)},e.decorators=[{type:t.Directive,args:[{selector:"[useEffect]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={useEffect:[{type:t.Input}],useEffectOn:[{type:t.Input}]},e}();var ne=function(){function e(e,t){var n=this;this.templateRef=e,this.vcr=t,this.context={$implicit:{state:null,dispatch:function(e){this.state=this.reducer(this.state,e),this.detectChanges()},reducer:function(){},detectChanges:function(){n.embeddedViewRef.detectChanges()}}},this.embeddedViewRef=this.vcr.createEmbeddedView(this.templateRef,this.context)}return e.prototype.ngOnChanges=function(e){e.useReducerInit&&"function"==typeof this.useReducerInit&&(this.context.$implicit.reducer=this.useReducerInit,this.context.$implicit.state=this.useReducerWith,this.useReducerAnd&&this.context.$implicit.dispatch(this.useReducerAnd))},e.prototype.ngOnDestroy=function(){this.vcr.clear(),this.embeddedViewRef.destroy(),this.embeddedViewRef=null},e.decorators=[{type:t.Directive,args:[{selector:"[useReducer]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={useReducerInit:[{type:t.Input}],useReducerWith:[{type:t.Input}],useReducerAnd:[{type:t.Input}]},e}();var ie=function(){function e(e,t){var n=this;this.templateRef=e,this.vcr=t,this.context={},Object.defineProperty(this.context,"$implicit",{get:function(){return n.value},set:function(e){n.value=e,n.embeddedViewRef&&n.embeddedViewRef.detectChanges()}}),this.embeddedViewRef=this.vcr.createEmbeddedView(this.templateRef,this.context)}return e.prototype.ngOnChanges=function(e){e.useStateDefault&&(this.value=this.useStateDefault)},e.prototype.ngOnDestroy=function(){this.vcr.clear(),this.embeddedViewRef.destroy(),this.embeddedViewRef=null},e.decorators=[{type:t.Directive,args:[{selector:"[useState]"}]}],e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef}]},e.propDecorators={useStateDefault:[{type:t.Input}]},e}();var oe=function(){function e(){var e=this;this.elementLink=new Map,this.observer=new IntersectionObserver((function(t){t.forEach((function(t){var n=e.elementLink.get(t.target);t.isIntersecting?function(e){e.reattach(),e.detectChanges()}(n):function(e){e.detach()}(n)}))}))}return e.prototype.register=function(e,t){this.elementLink.set(e,t),this.observer.observe(e)},e.prototype.unregister=function(e){this.elementLink.delete(e),this.observer.unobserve(e)},e.prototype.ngOnDestroy=function(){var e=this;this.elementLink.forEach((function(t,n){return e.observer.unobserve(n)})),this.elementLink.clear()},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e},token:e,providedIn:"root"}),e}();var re=function(){function e(e,t,n){this.handler=e,this.elementRef=t,this.cd=n,this.handler.register(this.elementRef.nativeElement,n)}return e.prototype.ngOnDestroy=function(){this.handler.unregister(this.elementRef.nativeElement)},e.decorators=[{type:t.Directive,args:[{selector:"[virtual]"}]}],e.ctorParameters=function(){return[{type:oe},{type:t.ElementRef},{type:t.ChangeDetectorRef}]},e.propDecorators={virtual:[{type:t.Input}]},e}();var se=function(){function e(e){this.cd=e,this.context=this.cd.context}return e.prototype.transform=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return t.apply(this.context,f([e],n))},e.decorators=[{type:t.Pipe,args:[{name:"call"}]}],e.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},e}();function ce(){return console}var ae=new t.InjectionToken("Console",{providedIn:"root",factory:ce}),pe=["count","markTimeline","time","timeEnd","profile","profileEnd","timeline","timelineEnd","timeStamp","group","groupCollapsed"],ue=function(){function e(e){this.console=e}return e.prototype.transform=function(e,t){var n;void 0===t&&(t="log");for(var i,o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return i=pe.includes(t)?o.length>0?o:[e]:f([e],o),(n=this.console)[t].apply(n,f(i)),e},e.decorators=[{type:t.Pipe,args:[{name:"console"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[ae]}]}]},e}();var fe=function(){};var he=[v,b,V,T,L,j,S,q,K,H,B,J,X,Z,Q,ee,ne,ie,te,re],le=[se,ue],de=function(){function e(){}return e.forLazy=function(n){return{ngModule:e,providers:[{provide:z,useValue:n},{provide:t.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:n,multi:!0}]}},e.forKeepAlive=function(t){return{ngModule:e,providers:[{provide:M,useValue:t}]}},e.decorators=[{type:t.NgModule,args:[{imports:[],declarations:[he,le],exports:[he,le]}]}],e}();e.AsyncDirective=v,e.CallPipe=se,e.ComposeDirective=b,e.ConsolePipe=ue,e.CookiesDirective=V,e.HttpDirective=T,e.InitDirective=j,e.IsDevModeDirective=S,e.KeepAliveConfig=M,e.KeepAliveDirective=q,e.KeepAliveGC=$,e.LAZY_COMPONENT_TOKEN=z,e.LazyDirective=L,e.NestDirective=K,e.NgForTrackByKeyDirective=ee,e.NgxfModule=de,e.RenamePropDirective=H,e.RepeatDirective=B,e.ReturnDirective=J,e.RouteDirective=X,e.SetPropsDirective=Z,e.TimeoutDirective=Q,e.UseEffect=function(e,t){var n=new WeakMap;function i(){var t=e.call(this);n.set(this,t)}function o(){if(n.has(this)){var e=n.get(this);e&&e()}}return function(e){var n=e.ngComponentDef.onInit||fe;e.ngComponentDef.onInit=function(){n(),i.call(this)};var r=e.ngComponentDef.onChanges||fe;e.ngComponentDef.onChanges=function(e){r(e),function(e){return!t||0!==t.length&&t.every((function(t){return t in e}))}(e)&&(o.call(this),i.call(this))};var s=e.ngComponentDef.onDestroy||fe;e.ngComponentDef.onDestroy=function(){s(),o.call(this)}}},e.UseEffectDirective=te,e.UseReducer=function(e,t,n){var i=u(e,2),o=i[0],r=i[1];return(function(e){var i=e.ngComponentDef.factory;e.ngComponentDef.factory=function(){var s=i(e.ngComponentDef.type);return s[o]=n,s[r]=function(e){return s[o]=t(s[o],e)},s}})},e.UseReducerDirective=ne,e.UseState=function(e,t){var n=u(e,2),i=n[0],o=n[1];return(function(e){var n=e.ngComponentDef.factory;e.ngComponentDef.factory=function(){var r=n(e.ngComponentDef.type);return r[i]=t,r[o]=function(e){return r[i]=e},r}})},e.UseStateDirective=ie,e.VirtualDirective=re,e.ɵa=F,e.ɵb=_,e.ɵc=N,e.ɵd=U,e.ɵe=ce,e.ɵf=ae,e.ɵg=D,e.ɵh=x,e.ɵi=oe,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngxf-platform.umd.min.js.map